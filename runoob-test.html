<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>花朵光辉效果</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background-color: #000;
            overflow: hidden;
        }

        canvas {
            position: absolute;
            top: 50%;
            left: 50%;
/*             transform: translate(-50%, -50%); */
        }
    </style>
</head>
<body>
    <canvas id="c"></canvas>
    <script>
        var canvas = document.getElementById('c');
        var ctx = canvas.getContext('2d');

        // 设置画布尺寸自适应屏幕大小
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // 花朵的基本属性
        var flower = {
            x: canvas.width / 2,
            y: canvas.height / 2,
            radius: 100,
            petalCount: 8,
            petalLength: 120,
            petalWidth: 30,
            color: "#FF69B4" // 花瓣的颜色
        };

        // 设置光辉粒子的属性
        var particles = [];

        // 绘制花朵
        function drawFlower() {
            ctx.save();
            ctx.translate(flower.x, flower.y);
            ctx.beginPath();

            for (var i = 0; i < flower.petalCount; i++) {
                var angle = (i * Math.PI * 2) / flower.petalCount;
                var petalX = flower.petalLength * Math.cos(angle);
                var petalY = flower.petalLength * Math.sin(angle);

                // 绘制每一片花瓣
                ctx.moveTo(0, 0);
                ctx.lineTo(petalX, petalY);
                ctx.lineWidth = flower.petalWidth;
                ctx.strokeStyle = flower.color;
                ctx.stroke();
            }

            ctx.restore();
        }

        // 创建光辉粒子
        function createParticle() {
            var angle = Math.random() * Math.PI * 2;
            var distance = Math.random() * 200 + 50; // 粒子离花朵的初始距离
            var speed = Math.random() * 3 + 1; // 粒子的速度
            var particle = {
                x: flower.x + Math.cos(angle) * distance,
                y: flower.y + Math.sin(angle) * distance,
                radius: Math.random() * 2 + 1,
                alpha: 1,
                speed: speed,
                angle: angle
            };
            particles.push(particle);
        }

        // 绘制光辉粒子
        function drawParticles() {
            ctx.globalCompositeOperation = 'lighter'; // 光辉效果
            for (var i = 0; i < particles.length; i++) {
                var p = particles[i];
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
                ctx.fillStyle = "rgba(255, 255, 255, " + p.alpha + ")";
                ctx.fill();
                ctx.closePath();

                // 更新粒子位置和透明度
                p.x += Math.cos(p.angle) * p.speed;
                p.y += Math.sin(p.angle) * p.speed;
                p.alpha -= 0.01;
                p.radius += 0.05;

                // 移除过时的粒子
                if (p.alpha <= 0) {
                    particles.splice(i, 1);
                    i--;
                }
            }
            ctx.globalCompositeOperation = 'source-over'; // 恢复正常合成模式
        }

        // 动画函数
        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height); // 清空画布

            // 绘制花朵
            drawFlower();

            // 生成新的光辉粒子
            if (Math.random() < 0.05) {
                createParticle();
            }

            // 绘制并更新粒子
            drawParticles();

            requestAnimationFrame(animate);
        }

        // 启动动画
        animate();

        // 窗口调整时，重新设置画布尺寸
        window.onresize = function () {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        };
    </script>
</body>
</html>
