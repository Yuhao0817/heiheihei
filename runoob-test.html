<canvas id="c"></canvas>
<script>
    var c = document.getElementById('c');  
    var a = c.getContext('2d');  
    // 设置canvas的宽高为屏幕尺寸
    c.width = window.innerWidth;  
    c.height = window.innerHeight;  

    var f = c.width; 
    var h = -250; 
    
    // 获取屏幕中心坐标
    var centerX = window.innerWidth / 2;
    var centerY = window.innerHeight / 2;

    function p(a, b, c) {
        if (c > 60) return [
            Math.sin(a * 7) * (13 + 5 / (0.2 + Math.pow(b * 4, 4))) - Math.sin(b) * 50, 
            b * f + 50, 
            625 + Math.cos(a * 7) * (13 + 5 / (0.2 + Math.pow(b * 4, 4))) + b * 400, 
            a * 1 - b / 2, 
            a
        ]; 

        var A = a * 2 - 1; 
        var B = b * 2 - 1; 
        if (A * A + B * B < 1) { 
            if (c > 37) { 
                var n = (Math.random() * 2 | 0) ? 6 : 4; 
                var o = 0.5 / (a + 0.01) + Math.cos(b * 125) * 3 - a * 300; 
                var w = b * h; 
                return [
                    o * Math.cos(n) + w * Math.sin(n) + (Math.random() & 1) * 610 - 390, 
                    o * Math.sin(n) - w * Math.cos(n) + 550 - (Math.random() & 1) * 350, 
                    1180 + Math.cos(B + A) * 99 - (Math.random() & 1) * 300, 
                    0.4 - a * 0.1 + Math.pow(1 - B * B, -h * 6) * 0.15 - a * b * 0.4 + Math.cos(a + b) / 5 + Math.pow(Math.cos((o * (a + 1) + (B > 0 ? w : -w)) / 25), 30) * 0.1 * (1 - B * B),
                    o / 1000 + 0.7 - o * w * 3e-6
                ]; 
            } 
            if (c > 32) { 
                c = c * 1.16 - 0.15; 
                var o = a * 45 - 20; 
                var w = b * b * h; 
                var z = o * Math.sin(c) + w * Math.cos(c) + 620; 
                return [
                    o * Math.cos(c) - w * Math.sin(c), 
                    28 + Math.cos(B * 0.5) * 99 - b * b * b * 60 - z / 2 - h, 
                    z, 
                    (b * b * 0.3 + Math.pow((1 - (A * A)), 7) * 0.15 + 0.3) * b, 
                    b * 0.7
                ];
            } 
            o = A * (2 - b) * (80 - c * 2); 
            w = 99 - Math.cos(A) * 120 - Math.cos(b) * (-h - c * 4.9) + Math.cos(Math.pow(1 - b, 7)) * 50 + c * 2; 
            z = o * Math.sin(c) + w * Math.cos(c) + 700; 
            return [
                o * Math.cos(c) - w * Math.sin(c), 
                B * 99 - Math.cos(Math.pow(b, 7)) * 50 - c / 3 - z / 1.35 + 450, 
                z, 
                (1 - b / 1.2) * 0.9 + a * 0.1, 
                Math.pow((1 - b), 20) / 4 + 0.05
            ];
        }
    }

    // 动画绘制
    setInterval(function() {
        for (var i = 0; i < 1e4; i++) {
            var s = p(Math.random(), Math.random(), i % 46 / 0.74);
            if (s) {
                var z = s[2];
                // 使用centerX和centerY来调整图形的居中
                var x = ~~(s[0] * f / z - h + centerX);  
                var y = ~~(s[1] * f / z - h + centerY);  
                if (!window.m || window.m[q = y * f + x] > z) {
                    window.m[q] = z;
                    a.fillStyle = "rgb(" + ~~(s[3] * h) + "," + ~~(s[4] * h) + "," + ~~(s[3] * s[3] * -80) + ")";
                    a.fillRect(x, y, 1, 1);
                }
            }
        }
    }, 0);
</script>
